<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Survey Form</title>
  <style>
    body {
      background-color: #0616a4;
      padding: 20px;
      font-family: Arial, sans-serif;
      min-height: 100vh;
    }

    .container {
      max-width: 600px;
      margin: 0 auto;
      background-color: #fff;
      padding: 20px;
      border-radius: 5px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }

    .progress {
      text-align: right;
      font-weight: bold;
      margin-bottom: 10px;
      color: #032B44;
    }

    .thankYou {
      background: white;
      padding: 20px;
      border-radius: 5px;
      box-shadow: 0 0 10px rgba(0,0,0,0.3);
      text-align: center;
    }

    fieldset {
      border: none;
      margin-bottom: 20px;
    }

    label {
      display: block;
      margin-top: 10px;
    }

    input, select, textarea, button {
      display: block;
      width: 100%;
      padding: 8px;
      margin-top: 5px;
      font-size: 1rem;
      border-radius: 4px;
      border: 1px solid #ccc;
    }

    button {
      margin-top: 15px;
      background-color: #0616a4;
      color: white;
      border: none;
      cursor: pointer;
    }

    button:hover {
      background-color: #032B44;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Online Survey</h1>
    <form id="surveyForm">
      <fieldset>
        <legend>Personal Info</legend>
        <label>Name:
          <input type="text" name="name" required>
        </label>
        <label>Phone Number:
          <input type="tel" name="phone" required>
        </label>
        <label>Age:
          <input type="number" name="age" min="18" max="120" required>
        </label>
        <label>User Type:
          <select name="userType" required>
            <option value="">Select User Type</option>
            <option value="student">Student</option>
            <option value="professional">Professional</option>
            <option value="retired">Retired</option>
          </select>
        </label>
        <label>Preferred Survey Category:
          <select name="surveyCategory" required>
            <option value="technology">Technology</option>
            <option value="health">Health</option>
            <option value="education">Education</option>
          </select>
        </label>
      </fieldset>

      <div id="surveyContent"></div>
    </form>

    <div id="thankYouMessage" class="thankYou" style="display:none">
      <h2>Thank you for completing the survey!</h2>
      <p>Your responses have been recorded.</p>
    </div>
  </div>

  <script>
    const topicQuestions = {
      technology: [
        {
          type: 'radio',
          question: 'How often do you upgrade your smartphone?',
          options: ['Every year', 'Every 2-3 years', 'Every 4-5 years', 'Rarely or never']
        },
        {
          type: 'checkbox',
          question: 'Which of the following technologies do you use regularly?',
          options: ['Artificial Intelligence', 'Virtual Reality', 'Cloud Computing', 'Internet of Things', 'Blockchain']
        }
      ],
      health: [
        {
          type: 'radio',
          question: 'How often do you exercise?',
          options: ['Daily', '3-4 times a week', '1-2 times a week', 'Rarely or never']
        },
        {
          type: 'checkbox',
          question: 'Which of the following health practices do you follow?',
          options: ['Regular check-ups', 'Balanced diet', 'Meditation', 'Yoga', 'Tracking sleep patterns']
        }
      ],
      education: [
        {
          type: 'radio',
          question: 'How do you prefer to learn new skills?',
          options: ['Online courses', 'In-person classes', 'Self-study with books', 'Hands-on experience']
        },
        {
          type: 'checkbox',
          question: 'Which of the following educational resources do you use?',
          options: ['MOOCs', 'Educational apps', 'Textbooks', 'Video tutorials', 'Study groups']
        }
      ]
    };

    const baseQuestions = [
      {
        type: 'radio',
        question: 'Do you agree with the statement above?',
        options: ['Yes', 'No', 'Unsure']
      },
      {
        type: 'checkbox',
        question: 'Select the options that apply to you:',
        options: ['Option 1', 'Option 2', 'Option 3', 'Option 4', 'Option 5']
      },
      {
        type: 'radio',
        question: 'How likely are you to recommend this survey to others?',
        options: ['Very likely', 'Somewhat likely', 'Neutral', 'Somewhat unlikely', 'Very unlikely']
      }
    ];

    const surveyForm = document.getElementById('surveyForm');
    const surveyContent = document.getElementById('surveyContent');
    const thankYouMessage = document.getElementById('thankYouMessage');

    let questions = [];
    let currentQuestion = 0;
    const answers = {};

    function buildSurvey(category) {
      questions = [...(topicQuestions[category] || []), ...baseQuestions];
      currentQuestion = 0;
      surveyContent.innerHTML = '';
      renderQuestion();
    }

    function renderQuestion() {
      surveyContent.innerHTML = '';

      if (currentQuestion < questions.length) {
        const q = questions[currentQuestion];
        const fieldset = document.createElement('fieldset');
        const legend = document.createElement('legend');
        legend.textContent = `Question ${currentQuestion + 1}`;
        fieldset.appendChild(legend);

        const p = document.createElement('p');
        p.textContent = q.question;
        fieldset.appendChild(p);

        q.options.forEach(opt => {
          const label = document.createElement('label');
          const input = document.createElement('input');
          input.type = q.type;
          input.name = `q${currentQuestion}`;
          input.value = opt;
          input.checked = answers[currentQuestion]?.includes(opt) || false;

          input.addEventListener('change', () => handleAnswer(currentQuestion, opt, q.type === 'checkbox'));
          label.appendChild(input);
          label.append(` ${opt}`);
          fieldset.appendChild(label);
        });

        const progress = document.createElement('div');
        progress.className = 'progress';
        progress.textContent = `${currentQuestion + 1}/${questions.length}`;
        surveyContent.appendChild(progress);

        surveyContent.appendChild(fieldset);

        const nextBtn = document.createElement('button');
        nextBtn.type = 'button';
        nextBtn.textContent = 'Next';
        nextBtn.addEventListener('click', handleNext);
        surveyContent.appendChild(nextBtn);
      } else {
        const feedbackFieldset = document.createElement('fieldset');
        const legend = document.createElement('legend');
        legend.textContent = 'Feedback';
        feedbackFieldset.appendChild(legend);

        const label = document.createElement('label');
        label.textContent = 'Please provide any additional thoughts:';

        const textarea = document.createElement('textarea');
        textarea.name = 'feedback';
        textarea.rows = 4;
        label.appendChild(textarea);

        feedbackFieldset.appendChild(label);

        const submitBtn = document.createElement('button');
        submitBtn.type = 'submit';
        submitBtn.textContent = 'Submit Survey';

        feedbackFieldset.appendChild(submitBtn);
        surveyContent.appendChild(feedbackFieldset);
      }
    }

    function handleAnswer(index, option, isCheckbox) {
      if (!answers[index]) answers[index] = [];

      if (isCheckbox) {
        const i = answers[index].indexOf(option);
        if (i > -1) {
          answers[index].splice(i, 1);
        } else {
          answers[index].push(option);
        }
      } else {
        answers[index] = [option];
      }
    }

    function handleNext() {
      const ans = answers[currentQuestion];
      if (ans && ans.length > 0) {
        currentQuestion++;
        renderQuestion();
      } else {
        alert('Please select at least one option.');
      }
    }

    surveyForm.addEventListener('change', (e) => {
      if (e.target.name === 'surveyCategory') {
        buildSurvey(e.target.value);
      }
    });

    surveyForm.addEventListener('submit', (e) => {
      e.preventDefault();

      const formData = new FormData(surveyForm);
      const allValid = ['name', 'phone', 'age', 'userType', 'surveyCategory'].every(key => formData.get(key));
      if (!allValid || !answers[currentQuestion] || answers[currentQuestion].length === 0) {
        alert('Please complete all required fields and the final question.');
        return;
      }

      surveyForm.style.display = 'none';
      thankYouMessage.style.display = 'block';
      thankYouMessage.querySelector('h2').textContent = `Thank you for completing the ${formData.get('surveyCategory')} survey!`;
    });

    // Initialize with default category
    buildSurvey('technology');
  </script>
</body>
</html>
